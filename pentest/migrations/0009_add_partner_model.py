# Generated by Django 3.2.13 on 2022-05-04 21:41

import django.db.models.deletion
from django.db import migrations, models

from pentest.utils import pentest_partner_migration


def partner_migration(apps, schema_editor):
    partner = apps.get_model('user', 'Partner')
    pentest_request = apps.get_model('pentest', 'PentestRequest')
    pentest_partner_migration(partner, pentest_request)


class Migration(migrations.Migration):
    dependencies = [
        ('user', '0066_add_partner_model'),
        ('pentest', '0008_removing_unnecessary_pentest_statuses'),
    ]

    operations = [
        migrations.AddField(
            model_name='pentestrequest',
            name='partner',
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name='pentest_requests',
                to='user.partner',
            ),
        ),
        migrations.RunPython(partner_migration),
    ]
